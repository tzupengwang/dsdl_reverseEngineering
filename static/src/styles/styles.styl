// variables
bg = rgb(26,26,29)

// font-faces
@font-face
  font-family: 'refrigerator_deluxe-bold'
  font-weight: bold
  src url('/static/fonts/refrigeratorDelBold.otf') format('opentype')

// mixins
@import 'nib'

// main part
html, body
  width: 100%
  height: 100%
  top: 0
  left: 0
  position: absolute
  color: #fff
  font-family: 'refrigerator_deluxe-bold'
  font-size: 10px
  line-height: 1.1em
  letter-spacing: .03em
  margin: 0
  overflow: hidden
  background-image: url('/static/images/grid.jpg')
  background-size: cover
  background-repeat: no-repeat
  background-position: center
  transition(background .5s)
  -webkit-font-smoothing: antialiased
  text-transform: uppercase

.stage {
  z-index: 100
  position: absolute
  height: 100%
  width: 100%
  left: 0
  top: 0
  background-color: rgba(41,39,45,.83)
  transition(.7s)
  & .title-bar {
    position: fixed
    display: block
    top: 50px
    left: 20%
    font-size: 25px
  }
  & .mode-bar {
    position: fixed
    display: block
    top: 50px
    right: 20%
    font-size: 25px
    cursor: pointer
    &:hover {
      transform(scale(1.06))
    }
  }
  & .delete-bar {
    position: fixed
    display: block
    bottom: 50px
    left: 20%
    font-size: 20px
    cursor: pointer
    &.non-active {
      color: #616161
      cursor: none
    }
    &.active {
      color: white
      &:hover {
        transform(scale(1.06))
      }
    }
  }
  & .toolkit {
    position: fixed
    display: flex
    width: 20%
    height: 80%
    top: 50px
    left: 0
    font-size: 20px
    flex-direction: column
    align-items: center
    justify-content: center
    & .title {
      width: 50%
      border-bottom: 1px solid white
      padding-bottom: 2px
      margin-bottom: 10px
    }
    & .flip-flop, .logic-gate, .input, .output {
      position: relative
      margin: 5px
    }
  }
  & .error-log {
    position: fixed
    display: flex
    width: 20%
    height: 65%
    top: 130px
    right: 0
    font-size: 20px
    flex-direction: column
    align-items: center
    justify-content: flex-head
    & .title {
      width: 50%
      border-bottom: 1px solid white
      padding-bottom: 2px
      margin-bottom: 10px
    }
    & .error-box {
      overflow: auto
      width: 100%
      display: flex
      flex-direction: column
      align-items: center
      justify-content: flex-head
      & .error {
        background-color: rgba(128,128,128,0.7)
        border-radius(3px)
        width: 70%
        color: #ff8d8d
        position: relative
        display: block
        overflow-wrap: break-word
        padding: 10px 4px 6px 7px
        font-size: 17px
        line-height: 20px
        margin: 5px
        text-transform: none
      }
    }
  }
  & .run-button {
    position: fixed
    display: block
    bottom: 65px
    right: 20%
    font-size: 35px
    cursor: pointer
    &:hover {
      transform(scale(1.09))
    }
  }
}


.overlay
  width: 100%
  height: 100%
  background-image: url('/static/images/stock.jpg')
  background-repeat: no-repeat
  background-size: cover
  background-position: center
  position: fixed
  bottom: 100%
  left: 0
  z-index: 999
  overflow-y: scroll
  pointer-events: none
  transform(translateY(0))
  transition(.45s cubic-bezier($intenseeaseout))
  text-align: center
  &::after
    position: absolute
    display: block
    top: 0
    bottom: 0
    left: 0
    right: 0
    z-index: 5
    background-color: rgba(41,39,45,.73)
    background-image: url('/static/images/pattern.png')
    content: ''
  &.active
    pointer-events: auto
    transform(translateY(100%))
  & .set-col
    position: absolute
    left: 0
    right: 0
    width: 560px
    height: 100%
    margin: 0 auto
    z-index: 10
    & .list-menu {
      position: absolute
      top: 0
      bottom: 0
      height: 350px
      width: 100%
      margin: auto 0
      padding: 0
      & .list-item {
        box-sizing(border-box)
        list-style-type: none
        margin-bottom: 70px
        & .close {
          position: relative
          display: block
          height: 54px
          width: 54px
          border-radius(100px)
          margin: 0 auto 30px
          background-color: rgb(162, 161, 161)
          &::after {
            content: ""
            position: absolute
            top:5px
            left:5px
            background-color: rgba(41,39,45,.73)
            width: 44px
            height: 44px
            border-radius(100px)
            background-size: 120%
            transition(.14s)
          }
          & .icon {
            position: absolute
            top:50%
            left: 50%
            margin-left: -12px
            margin-top: -4px
            z-index: 99
            transition(.18s .1s)
            &::before, &::after {
              content: ""
              position: absolute
              top:0
              left: 0
              width: 25px
              height: 7px
              border-radius(2px)
              background-color: rgb(222, 222, 222)
              background-size: 30px 30px
              transition(.3s cubic-bezier($smootheaseout))
              transform-origin(50% 50%)
            }
            &::before {
              transform(rotate(45deg))
            }
            &::after {
              transform(rotate(-45deg))
            }
          }
          &:hover {
            & .icon {
              &::before {
                transform(rotate(-135deg))
                transition-delay(.1s)
              }
              &::after {
                transform(rotate(135deg))
              }
            }
          }
          &:hover {
            transform(scale(1.07))
            &::after {
              transform(scale(.94))
            }
          }
        }
        & .flex-div {
          display: flex
          flex-direction: row
          align-items: center
          justify-content: center
          position: relative
          margin: 0 auto
          .checkbox {
            position: relative
            display: block
            height: 40px
            width: 40px
            border-radius(100px)
            margin: 0 10px
            background-color: rgb(162, 161, 161)
            &::after {
              content: ""
              position: absolute
              top:5px
              left:5px
              background-color: rgba(41,39,45,.73)
              width: 30px
              height: 30px
              border-radius(100px)
              background-size: 120%
              transition(.14s)
            }
            & .icon {
              position: absolute
              top:50%
              left: 50%
              margin-left: -12px
              margin-top: -4px
              z-index: 99
              transition(.18s .1s)
              ^[-2] .on .icon::after {
                content: ""
                position: absolute
                top: -5px
                left: 3px
                width: 18px
                height: 18px
                border-radius(10px)
                background-color: rgb(162, 161, 161)
                background-size: 30px 30px
                transition(.3s cubic-bezier($smootheaseout))
                transform-origin(50% 50%)
              }
            }
            &:hover {
              &.on .icon {
                &::after {
                  transform(scale(0.93))
                }
              }
            }
            &:hover {
              transform(scale(1.07))
              &::after {
                transform(scale(.94))
              }
            }
          }
          & .list-item-text {
            padding-top: 7px
            font-size: 50px
            font-weight: 400
          }
        }
        & .list-item-text {
          text-align: right
          font-size: 14px
          font-weight: 400
        }
      }
    }

// result

.result
  width: 100%
  height: 100%
  background-image: url('/static/images/grid.jpg')
  background-repeat: no-repeat
  background-size: cover
  background-position: center
  position: fixed
  top: 100%
  left: 0
  z-index: 999
  overflow-y: scroll
  pointer-events: none
  transform(translateY(0))
  transition(.45s cubic-bezier($intenseeaseout))
  text-align: center
  &::after
    position: absolute
    display: block
    top: 0
    bottom: 0
    left: 0
    right: 0
    z-index: 5
    background-color: rgba(41,39,45,.73)
    background-image: url('/static/images/pattern.png')
    content: ''
  &.active
    pointer-events: auto
    transform(translateY(-100%))
  & .set-col
    position: absolute
    display: flex
    flex-direction: column
    align-items: center
    justify-content: center
    left: 0
    right: 0
    width: 100%
    height: 100%
    margin: 0 auto
    overflow: auto
    z-index: 10
    & .close {
      position: relative
      display: block
      height: 54px
      width: 54px
      border-radius(100px)
      margin: 0 auto 30px
      background-color: rgb(162, 161, 161)
      &::after {
        content: ""
        position: absolute
        top:5px
        left:5px
        background-color: rgba(41,39,45,.73)
        width: 44px
        height: 44px
        border-radius(100px)
        background-size: 120%
        transition(.14s)
      }
      & .icon {
        position: absolute
        top:50%
        left: 50%
        margin-left: -12px
        margin-top: -4px
        z-index: 99
        transition(.18s .1s)
        &::before, &::after {
          content: ""
          position: absolute
          top:0
          left: 0
          width: 25px
          height: 7px
          border-radius(2px)
          background-color: rgb(222, 222, 222)
          background-size: 30px 30px
          transition(.3s cubic-bezier($smootheaseout))
          transform-origin(50% 50%)
        }
        &::before {
          transform(rotate(45deg))
        }
        &::after {
          transform(rotate(-45deg))
        }
      }
      &:hover {
        & .icon {
          &::before {
            transform(rotate(-135deg))
            transition-delay(.1s)
          }
          &::after {
            transform(rotate(135deg))
          }
        }
      }
      &:hover {
        transform(scale(1.07))
        &::after {
          transform(scale(.94))
        }
      }
    }
    & .mode-bar {
      display: block
      font-size: 25px
      margin: 5px
    }
    & table {
      font-size: 24px
      margin: 10px auto
      & tbody {
        display:block;
        width:auto;
        position:relative;
        overflow-x:auto;
        white-space:nowrap;
      }
      & tr {

        box-sizing(border-box)
        &:nth-child(1) td:nth-child(1){
          border-bottom: 0
        }
        &:nth-child(2) td:nth-child(1){
          border-bottom: 0
          border-top: 0
        }
        &:nth-child(3) td:nth-child(1){
          border-top: 0
        }
      }
      & th, td {
        box-sizing(border-box)
        border(2px solid grey)
        padding: 0.55em 1em
        & span {
          display: flex
          align-items: center
          justify-content: center
        }
        &.small {
          font-size: 17px
        }
      }
      border-collapse: collapse
    }
.moore {
  & tr:nth-child(1) td:nth-child(2){
    border-bottom: 0
  }
  & tr:nth-child(2) td:nth-child(2){
    border-bottom: 0
    border-top: 0
  }
  & tr:nth-child(3) td:nth-child(2){
    border-top: 0
  }
}

// gates
.flip-flop, .logic-gate, .input, .output
  display: block
  position: absolute
  overflow: hidden

.port {
  display: flex
  position: absolute
  align-items: center
  justify-content: center
  height: 37%
  width: 15%
  font-size: 19px
  &:hover {
    transform(scale(1.19))
  }
  &.active {
    transform(scale(1.19))
  }
}

.t-ff, .d-ff, .rs-ff, .jk-ff {
  width: 70px
  height: 60px
  display: block
  box-sizing(border-box)
  border-radius(2px)
  border(3px solid white)
  transition(.15s cubic-bezier($intenseeaseout))
  .port {
    &.top-left {
      top: 5px
      left: 7px
    }
    &.top-right {
      top: 5px
      right: 7px
    }
    &.bottom-left {
      bottom: 5px
      left: 7px
    }
    &.bottom-right {
      bottom: 5px
      right: 7px
    }
  }
  &:hover, &.active {
    border(3px solid #b1b1b1)
  }
}


.and-gate {
  width: 70px
  height: 60px
  display: block
  box-sizing(border-box)
  border-radius(2px 30px 30px 2px)
  border(3px solid white)
  transition(.15s cubic-bezier($intenseeaseout))
  .port {
    &.top-left {
      top: 5px
      left: 9px
    }
    &.bottom-left {
      bottom: 5px
      left: 9px
    }
    &.center-right {
      right: 7px
      top: 19px
    }
  }
  &:hover, &.active {
    border(3px solid #b1b1b1)
  }
}

.or-gate {
  width: 70px
  height: 60px
  display: block
  overflow: hidden
  box-sizing(border-box)
  //border-radius(2px 30px 30px 2px)
  //border(3px solid white)
  transition(.15s cubic-bezier($intenseeaseout))
  &::before {
    content: ''
    position: absolute
    display: block
    box-sizing(border-box)
    width: 120px
    height: 120px
    left: -110px
    top: -30px
    border-radius(50%)
    border(3px solid white)
  }
  & span {
    display: block
    position: absolute
    height: 50%
    width: 100%
    overflow: hidden
    &::before {
      content: ''
      position: absolute
      display: block
      border-right: 3px solid white
      height: 200%
      width: 100%
    }
    &:nth-child(1) {
      top: 0
      &::before {
        border-top: 3px solid white
        border-top-right-radius: 50px
      }
    }
    &:nth-child(2) {
      bottom: 0
      &::before {
        bottom: 0
        border-bottom: 3px solid white
        border-bottom-right-radius: 50px
      }
    }
  }
  .port {
    &.top-left {
      top: 5px
      left: 14px
    }
    &.bottom-left {
      bottom: 5px
      left: 14px
    }
    &.center-right {
      right: 10px
      top: 19px
    }
  }
  &:hover, &.active {
    &::before {
      border(3px solid #b1b1b1)
    }
    & span {
      &::before {
        border-right: 3px solid #b1b1b1
      }
      &:nth-child(1)::before {
        border-top: 3px solid #b1b1b1
      }
      &:nth-child(2)::before {
        border-bottom: 3px solid #b1b1b1
      }
    }
  }
}

.not-gate {
  width: 60px
  height: 60px
  display: block
  box-sizing(border-box)
  border-radius(40px)
  border(3px solid white)
  transition(.15s cubic-bezier($intenseeaseout))
  .port {
    &.center-left {
      left: 10px
      top: 19px
    }
    &.center-right {
      right: 10px
      top: 19px
    }
  }
  &:hover, &.active {
    border(3px solid #b1b1b1)
  }
}

.input .inputg {
  width: 70px
  height: 30px
  display: block
  box-sizing(border-box)
  border-radius(2px 30px 30px 2px)
  border(3px solid white)
  transition(.15s cubic-bezier($intenseeaseout))
  .port {
    &.center-right {
      right: 20px
      top: 10px
    }
  }
  &:hover, &.active {
    border(3px solid #b1b1b1)
  }
}
.output .outputg {
  width: 70px
  height: 30px
  display: block
  box-sizing(border-box)
  border-radius(30px 2px 2px 30px)
  border(3px solid white)
  transition(.15s cubic-bezier($intenseeaseout))
  .port {
    &.center-left {
      left: 27px
      top: 10px
    }
  }
  &:hover, &.active {
    border(3px solid #b1b1b1)
  }
}
